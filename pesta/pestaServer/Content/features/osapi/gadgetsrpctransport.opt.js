var osapi=osapi||{};if(gadgets&&gadgets.rpc){(function(){function a(e,d){var c=function(g){if(!g){d({code:500,message:"Container refused the request"})}else{if(g.error){d(g)}else{var f={};for(var h=0;h<g.length;h++){f[g[h].id]=g[h]}d(f)}}};gadgets.rpc.call("..","osapi._handleGadgetRpcMethod",c,e)}function b(c){var f={name:"gadgets.rpc",execute:a};var l=c["osapi.services"];if(l){for(var d in l){if(l.hasOwnProperty(d)){if(d==="gadgets.rpc"){var e=l[d];for(var h=0;h<e.length;h++){osapi._registerMethod(e[h],f)}}}}}if(osapi.container&&osapi.container.listMethods){var g=gadgets.util.runOnLoadHandlers;var j=2;var k=function(){j--;if(j==0){g()}};gadgets.util.runOnLoadHandlers=k;osapi.container.listMethods({}).execute(function(m){if(!m.error){for(var n=0;n<m.length;n++){osapi._registerMethod(m[n],f)}}k()});window.setTimeout(k,500)}}gadgets.config.register("osapi.services",null,b)})()};